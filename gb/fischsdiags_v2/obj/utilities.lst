                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.1.6 #12539 (MINGW32)
                                      4 ;--------------------------------------------------------
                                      5 	.module utilities
                                      6 	.optsdcc -mgbz80
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _ask_user_pass_or_fail
                                     12 	.globl _text_load_font
                                     13 	.globl _set_bkg_palette
                                     14 	.globl _EMU_printf
                                     15 	.globl _set_bkg_tiles
                                     16 	.globl _set_bkg_data
                                     17 	.globl _wait_vbl_done
                                     18 	.globl _waitpadup
                                     19 	.globl _joypad
                                     20 	.globl _blank_display
                                     21 ;--------------------------------------------------------
                                     22 ; special function registers
                                     23 ;--------------------------------------------------------
                                     24 ;--------------------------------------------------------
                                     25 ; ram data
                                     26 ;--------------------------------------------------------
                                     27 	.area _DATA
                                     28 ;--------------------------------------------------------
                                     29 ; ram data
                                     30 ;--------------------------------------------------------
                                     31 	.area _INITIALIZED
      000000                         32 ___EMU_PROFILER_INIT:
      000000                         33 	.ds 2
                                     34 ;--------------------------------------------------------
                                     35 ; absolute external ram data
                                     36 ;--------------------------------------------------------
                                     37 	.area _DABS (ABS)
                                     38 ;--------------------------------------------------------
                                     39 ; global & static initialisations
                                     40 ;--------------------------------------------------------
                                     41 	.area _HOME
                                     42 	.area _GSINIT
                                     43 	.area _GSFINAL
                                     44 	.area _GSINIT
                                     45 ;--------------------------------------------------------
                                     46 ; Home
                                     47 ;--------------------------------------------------------
                                     48 	.area _HOME
                                     49 	.area _HOME
                                     50 ;--------------------------------------------------------
                                     51 ; code
                                     52 ;--------------------------------------------------------
                                     53 	.area _CODE
                                     54 ;src/utilities.c:11: void blank_display() {
                                     55 ;	---------------------------------
                                     56 ; Function blank_display
                                     57 ; ---------------------------------
      000000                         58 _blank_display::
                                     59 ;src/utilities.c:12: PRINT_FUNC_INFO;
      000000 11rFCr00                60 	ld	de, #___str_2
      000003 D5                      61 	push	de
      000004 11 0C 00                62 	ld	de, #0x000c
      000007 D5                      63 	push	de
      000008 11rECr00                64 	ld	de, #___str_1
      00000B D5                      65 	push	de
      00000C 11rD7r00                66 	ld	de, #___str_0
      00000F D5                      67 	push	de
      000010 CDr00r00                68 	call	_EMU_printf
      000013 E8 08                   69 	add	sp, #8
                                     70 ;src/utilities.c:13: HIDE_SPRITES;
      000015 F0r00                   71 	ldh	a, (_LCDC_REG + 0)
      000017 E6 FD                   72 	and	a, #0xfd
      000019 E0r00                   73 	ldh	(_LCDC_REG + 0), a
                                     74 ;src/utilities.c:14: HIDE_BKG;
      00001B F0r00                   75 	ldh	a, (_LCDC_REG + 0)
      00001D E6 FE                   76 	and	a, #0xfe
      00001F E0r00                   77 	ldh	(_LCDC_REG + 0), a
                                     78 ;src/utilities.c:15: set_bkg_palette(0, 1,  blank_display_palettes);//FAR_OFS(pal_ptr));
      000021 11r00r00                79 	ld	de, #_blank_display_palettes
      000024 D5                      80 	push	de
      000025 AF                      81 	xor	a, a
      000026 3C                      82 	inc	a
      000027 F5                      83 	push	af
      000028 CDr00r00                84 	call	_set_bkg_palette
      00002B E8 04                   85 	add	sp, #4
                                     86 ;src/utilities.c:16: set_bkg_palette(1, 1,  blank_display_palettes);
      00002D 11r00r00                87 	ld	de, #_blank_display_palettes
      000030 D5                      88 	push	de
      000031 21 01 01                89 	ld	hl, #0x101
      000034 E5                      90 	push	hl
      000035 CDr00r00                91 	call	_set_bkg_palette
      000038 E8 04                   92 	add	sp, #4
                                     93 ;src/utilities.c:17: set_bkg_palette(2, 1,  blank_display_palettes);
      00003A 11r00r00                94 	ld	de, #_blank_display_palettes
      00003D D5                      95 	push	de
      00003E 21 02 01                96 	ld	hl, #0x102
      000041 E5                      97 	push	hl
      000042 CDr00r00                98 	call	_set_bkg_palette
      000045 E8 04                   99 	add	sp, #4
                                    100 ;src/utilities.c:18: set_bkg_palette(3, 1,  blank_display_palettes);
      000047 11r00r00               101 	ld	de, #_blank_display_palettes
      00004A D5                     102 	push	de
      00004B 21 03 01               103 	ld	hl, #0x103
      00004E E5                     104 	push	hl
      00004F CDr00r00               105 	call	_set_bkg_palette
      000052 E8 04                  106 	add	sp, #4
                                    107 ;src/utilities.c:19: set_bkg_palette(4, 1,  blank_display_palettes);
      000054 11r00r00               108 	ld	de, #_blank_display_palettes
      000057 D5                     109 	push	de
      000058 21 04 01               110 	ld	hl, #0x104
      00005B E5                     111 	push	hl
      00005C CDr00r00               112 	call	_set_bkg_palette
      00005F E8 04                  113 	add	sp, #4
                                    114 ;src/utilities.c:20: set_bkg_palette(5, 1,  blank_display_palettes);
      000061 11r00r00               115 	ld	de, #_blank_display_palettes
      000064 D5                     116 	push	de
      000065 21 05 01               117 	ld	hl, #0x105
      000068 E5                     118 	push	hl
      000069 CDr00r00               119 	call	_set_bkg_palette
      00006C E8 04                  120 	add	sp, #4
                                    121 ;src/utilities.c:21: set_bkg_palette(6, 1,  blank_display_palettes);
      00006E 11r00r00               122 	ld	de, #_blank_display_palettes
      000071 D5                     123 	push	de
      000072 21 06 01               124 	ld	hl, #0x106
      000075 E5                     125 	push	hl
      000076 CDr00r00               126 	call	_set_bkg_palette
      000079 E8 04                  127 	add	sp, #4
                                    128 ;src/utilities.c:22: set_bkg_palette(7, 1,  blank_display_palettes);
      00007B 11r00r00               129 	ld	de, #_blank_display_palettes
      00007E D5                     130 	push	de
      00007F 21 07 01               131 	ld	hl, #0x107
      000082 E5                     132 	push	hl
      000083 CDr00r00               133 	call	_set_bkg_palette
      000086 E8 04                  134 	add	sp, #4
                                    135 ;src/utilities.c:23: set_bkg_data(0, blank_display_TILE_COUNT, blank_display_tiles);
      000088 11r00r00               136 	ld	de, #_blank_display_tiles
      00008B D5                     137 	push	de
      00008C AF                     138 	xor	a, a
      00008D 3C                     139 	inc	a
      00008E F5                     140 	push	af
      00008F CDr00r00               141 	call	_set_bkg_data
      000092 E8 04                  142 	add	sp, #4
                                    143 ;src/utilities.c:24: VBK_REG = 1;
      000094 3E 01                  144 	ld	a, #0x01
      000096 E0r00                  145 	ldh	(_VBK_REG + 0), a
                                    146 ;src/utilities.c:25: set_bkg_tiles(0, 0, 20, 18, blank_display_map_attributes);
      000098 11r00r00               147 	ld	de, #_blank_display_map_attributes
      00009B D5                     148 	push	de
      00009C 21 14 12               149 	ld	hl, #0x1214
      00009F E5                     150 	push	hl
      0000A0 AF                     151 	xor	a, a
      0000A1 0F                     152 	rrca
      0000A2 F5                     153 	push	af
      0000A3 CDr00r00               154 	call	_set_bkg_tiles
      0000A6 E8 06                  155 	add	sp, #6
                                    156 ;src/utilities.c:26: VBK_REG = 0;
      0000A8 AF                     157 	xor	a, a
      0000A9 E0r00                  158 	ldh	(_VBK_REG + 0), a
                                    159 ;src/utilities.c:27: set_bkg_tiles(0, 0, 20, 18, blank_display_map);
      0000AB 11r00r00               160 	ld	de, #_blank_display_map
      0000AE D5                     161 	push	de
      0000AF 21 14 12               162 	ld	hl, #0x1214
      0000B2 E5                     163 	push	hl
      0000B3 AF                     164 	xor	a, a
      0000B4 0F                     165 	rrca
      0000B5 F5                     166 	push	af
      0000B6 CDr00r00               167 	call	_set_bkg_tiles
      0000B9 E8 06                  168 	add	sp, #6
                                    169 ;src/utilities.c:28: SHOW_BKG;
      0000BB F0r00                  170 	ldh	a, (_LCDC_REG + 0)
      0000BD F6 01                  171 	or	a, #0x01
      0000BF E0r00                  172 	ldh	(_LCDC_REG + 0), a
                                    173 ;src/utilities.c:29: text_load_font();
      0000C1 CDr00r00               174 	call	_text_load_font
                                    175 ;src/utilities.c:30: set_bkg_palette(0, 1, menu_background_palettes);
      0000C4 11r00r00               176 	ld	de, #_menu_background_palettes
      0000C7 D5                     177 	push	de
      0000C8 3E 01                  178 	ld	a, #0x01
      0000CA F5                     179 	push	af
      0000CB 33                     180 	inc	sp
      0000CC AF                     181 	xor	a, a
      0000CD F5                     182 	push	af
      0000CE 33                     183 	inc	sp
      0000CF CDr00r00               184 	call	_set_bkg_palette
      0000D2 E8 04                  185 	add	sp, #4
                                    186 ;src/utilities.c:31: wait_vbl_done();
                                    187 ;src/utilities.c:32: }
      0000D4 C3r00r00               188 	jp	_wait_vbl_done
      0000D7                        189 ___str_0:
      0000D7 5B 44 42 47 5D 20 28   190 	.ascii "[DBG] (%s:%d @ %s())"
             25 73 3A 25 64 20 40
             20 25 73 28 29 29
      0000EB 00                     191 	.db 0x00
      0000EC                        192 ___str_1:
      0000EC 73 72 63 2F 75 74 69   193 	.ascii "src/utilities.c"
             6C 69 74 69 65 73 2E
             63
      0000FB 00                     194 	.db 0x00
      0000FC                        195 ___str_2:
      0000FC 62 6C 61 6E 6B 5F 64   196 	.ascii "blank_display"
             69 73 70 6C 61 79
      000109 00                     197 	.db 0x00
                                    198 ;src/utilities.c:34: int ask_user_pass_or_fail() {
                                    199 ;	---------------------------------
                                    200 ; Function ask_user_pass_or_fail
                                    201 ; ---------------------------------
      00010A                        202 _ask_user_pass_or_fail::
                                    203 ;src/utilities.c:35: blank_display();
      00010A CDr00r00               204 	call	_blank_display
                                    205 ;src/utilities.c:36: HIDE_SPRITES;
      00010D F0r00                  206 	ldh	a, (_LCDC_REG + 0)
      00010F E6 FD                  207 	and	a, #0xfd
      000111 E0r00                  208 	ldh	(_LCDC_REG + 0), a
                                    209 ;src/utilities.c:37: HIDE_BKG;
      000113 F0r00                  210 	ldh	a, (_LCDC_REG + 0)
      000115 E6 FE                  211 	and	a, #0xfe
      000117 E0r00                  212 	ldh	(_LCDC_REG + 0), a
                                    213 ;src/utilities.c:38: set_bkg_palette(0, 1, passfail_bg_palettes);
      000119 11r00r00               214 	ld	de, #_passfail_bg_palettes
      00011C D5                     215 	push	de
      00011D AF                     216 	xor	a, a
      00011E 3C                     217 	inc	a
      00011F F5                     218 	push	af
      000120 CDr00r00               219 	call	_set_bkg_palette
      000123 E8 04                  220 	add	sp, #4
                                    221 ;src/utilities.c:39: set_bkg_palette(1, 1, passfail_bg_palettes);
      000125 11r00r00               222 	ld	de, #_passfail_bg_palettes
      000128 D5                     223 	push	de
      000129 21 01 01               224 	ld	hl, #0x101
      00012C E5                     225 	push	hl
      00012D CDr00r00               226 	call	_set_bkg_palette
      000130 E8 04                  227 	add	sp, #4
                                    228 ;src/utilities.c:40: set_bkg_palette(2, 1, passfail_bg_palettes);
      000132 11r00r00               229 	ld	de, #_passfail_bg_palettes
      000135 D5                     230 	push	de
      000136 21 02 01               231 	ld	hl, #0x102
      000139 E5                     232 	push	hl
      00013A CDr00r00               233 	call	_set_bkg_palette
      00013D E8 04                  234 	add	sp, #4
                                    235 ;src/utilities.c:41: set_bkg_palette(3, 1, passfail_bg_palettes);
      00013F 11r00r00               236 	ld	de, #_passfail_bg_palettes
      000142 D5                     237 	push	de
      000143 21 03 01               238 	ld	hl, #0x103
      000146 E5                     239 	push	hl
      000147 CDr00r00               240 	call	_set_bkg_palette
      00014A E8 04                  241 	add	sp, #4
                                    242 ;src/utilities.c:42: set_bkg_palette(4, 1, passfail_bg_palettes);
      00014C 11r00r00               243 	ld	de, #_passfail_bg_palettes
      00014F D5                     244 	push	de
      000150 21 04 01               245 	ld	hl, #0x104
      000153 E5                     246 	push	hl
      000154 CDr00r00               247 	call	_set_bkg_palette
      000157 E8 04                  248 	add	sp, #4
                                    249 ;src/utilities.c:43: set_bkg_palette(5, 1, passfail_bg_palettes);
      000159 11r00r00               250 	ld	de, #_passfail_bg_palettes
      00015C D5                     251 	push	de
      00015D 21 05 01               252 	ld	hl, #0x105
      000160 E5                     253 	push	hl
      000161 CDr00r00               254 	call	_set_bkg_palette
      000164 E8 04                  255 	add	sp, #4
                                    256 ;src/utilities.c:44: set_bkg_palette(6, 1, passfail_bg_palettes);
      000166 11r00r00               257 	ld	de, #_passfail_bg_palettes
      000169 D5                     258 	push	de
      00016A 21 06 01               259 	ld	hl, #0x106
      00016D E5                     260 	push	hl
      00016E CDr00r00               261 	call	_set_bkg_palette
      000171 E8 04                  262 	add	sp, #4
                                    263 ;src/utilities.c:45: set_bkg_palette(7, 1, passfail_bg_palettes);
      000173 11r00r00               264 	ld	de, #_passfail_bg_palettes
      000176 D5                     265 	push	de
      000177 21 07 01               266 	ld	hl, #0x107
      00017A E5                     267 	push	hl
      00017B CDr00r00               268 	call	_set_bkg_palette
      00017E E8 04                  269 	add	sp, #4
                                    270 ;src/utilities.c:46: set_bkg_data(0, passfail_bg_TILE_COUNT, passfail_bg_tiles);
      000180 11r00r00               271 	ld	de, #_passfail_bg_tiles
      000183 D5                     272 	push	de
      000184 21 00 72               273 	ld	hl, #0x7200
      000187 E5                     274 	push	hl
      000188 CDr00r00               275 	call	_set_bkg_data
      00018B E8 04                  276 	add	sp, #4
                                    277 ;src/utilities.c:47: VBK_REG = 1;
      00018D 3E 01                  278 	ld	a, #0x01
      00018F E0r00                  279 	ldh	(_VBK_REG + 0), a
                                    280 ;src/utilities.c:48: set_bkg_tiles(0, 0, 20, 18, passfail_bg_map_attributes);
      000191 11r00r00               281 	ld	de, #_passfail_bg_map_attributes
      000194 D5                     282 	push	de
      000195 21 14 12               283 	ld	hl, #0x1214
      000198 E5                     284 	push	hl
      000199 AF                     285 	xor	a, a
      00019A 0F                     286 	rrca
      00019B F5                     287 	push	af
      00019C CDr00r00               288 	call	_set_bkg_tiles
      00019F E8 06                  289 	add	sp, #6
                                    290 ;src/utilities.c:49: VBK_REG = 0;
      0001A1 AF                     291 	xor	a, a
      0001A2 E0r00                  292 	ldh	(_VBK_REG + 0), a
                                    293 ;src/utilities.c:50: set_bkg_tiles(0, 0, 20, 18, passfail_bg_map);
      0001A4 11r00r00               294 	ld	de, #_passfail_bg_map
      0001A7 D5                     295 	push	de
      0001A8 21 14 12               296 	ld	hl, #0x1214
      0001AB E5                     297 	push	hl
      0001AC AF                     298 	xor	a, a
      0001AD 0F                     299 	rrca
      0001AE F5                     300 	push	af
      0001AF CDr00r00               301 	call	_set_bkg_tiles
      0001B2 E8 06                  302 	add	sp, #6
                                    303 ;src/utilities.c:51: SHOW_BKG;
      0001B4 F0r00                  304 	ldh	a, (_LCDC_REG + 0)
      0001B6 F6 01                  305 	or	a, #0x01
      0001B8 E0r00                  306 	ldh	(_LCDC_REG + 0), a
                                    307 ;src/utilities.c:53: while (1) {
      0001BA                        308 00107$:
                                    309 ;src/utilities.c:54: if (joypad() & J_A) {
      0001BA CDr00r00               310 	call	_joypad
      0001BD CB 63                  311 	bit	4, e
      0001BF 28 08                  312 	jr	Z, 00104$
                                    313 ;src/utilities.c:55: result = TEST_PASSED;
      0001C1 11 25 00               314 	ld	de, #0x0025
                                    315 ;src/utilities.c:56: waitpadup();
      0001C4 CDr00r00               316 	call	_waitpadup
                                    317 ;src/utilities.c:57: break;
      0001C7 18 0D                  318 	jr	00108$
      0001C9                        319 00104$:
                                    320 ;src/utilities.c:58: } else if (joypad() & J_B) {
      0001C9 CDr00r00               321 	call	_joypad
      0001CC CB 6B                  322 	bit	5, e
      0001CE 28 EA                  323 	jr	Z, 00107$
                                    324 ;src/utilities.c:59: result = TEST_FAILED;
      0001D0 11 69 00               325 	ld	de, #0x0069
                                    326 ;src/utilities.c:60: waitpadup();
      0001D3 CDr00r00               327 	call	_waitpadup
                                    328 ;src/utilities.c:61: break;
      0001D6                        329 00108$:
                                    330 ;src/utilities.c:65: blank_display();
      0001D6 D5                     331 	push	de
      0001D7 CDr00r00               332 	call	_blank_display
      0001DA D1                     333 	pop	de
                                    334 ;src/utilities.c:66: return result;
                                    335 ;src/utilities.c:67: }
      0001DB C9                     336 	ret
                                    337 	.area _CODE
                                    338 	.area _INITIALIZER
      000000                        339 __xinit____EMU_PROFILER_INIT:
      000000r00r00                  340 	.dw _EMU_profiler_message
                                    341 	.area _CABS (ABS)
